// This is your Prisma schema file// This is your Prisma schema file,

// learn more about it in the docs: https://pris.ly/d/prisma-schema// learn more about it in the docs: https://pris.ly/d/prisma-schema



generator client {generator client {

  provider = "prisma-client-js"  provider = "prisma-client-js"

}  output   = "../../node_modules/.prisma/client"

}

datasource db {

  provider = "postgresql"datasource db {

  url      = env("POSTGRES_PRISMA_URL")  provider = "postgresql"

  directUrl = env("POSTGRES_URL_NON_POOLING")  url      = env("POSTGRES_PRISMA_URL")

}  directUrl = env("POSTGRES_URL_NON_POOLING")

}

model Usuario {

  id        Int      @id @default(autoincrement())model Usuario {

  email     String   @unique  id        Int      @id @default(autoincrement())

  password  String  email     String   @unique

  rol       String   @default("admin") // "admin" o "cliente"  password  String

  clienteId Int?     @unique  rol       String   @default("admin") // "admin" o "cliente"

  cliente   Cliente? @relation(fields: [clienteId], references: [id])  clienteId Int?     @unique

  createdAt DateTime @default(now())  cliente   Cliente? @relation(fields: [clienteId], references: [id])

  updatedAt DateTime @updatedAt  createdAt DateTime @default(now())

}  updatedAt DateTime @updatedAt

}

model Cliente {

  id        Int      @id @default(autoincrement())model Cliente {

  nombre    String  id        Int      @id @default(autoincrement())

  cedula    String   @unique  nombre    String

  telefono  String  cedula    String   @unique

  direccion String?  telefono  String

  email     String   @unique  direccion String?

  activo    Boolean  @default(true) // true: activo, false: archivado/completado  email     String   @unique

  usuario   Usuario?  activo    Boolean  @default(true) // true: activo, false: archivado/completado

  autos     Auto[]  usuario   Usuario?

  createdAt DateTime @default(now())  autos     Auto[]

  updatedAt DateTime @updatedAt  createdAt DateTime @default(now())

}  updatedAt DateTime @updatedAt

}

model Auto {

  id         Int      @id @default(autoincrement())model Auto {

  marca      String  id         Int      @id @default(autoincrement())

  modelo     String  marca      String

  anio       Int  modelo     String

  matricula  String   @unique  anio       Int

  precio     Float  matricula  String   @unique

  estado     String   @default("disponible") // disponible, vendido, reservado  precio     Float

  activo     Boolean  @default(true) // true: activo, false: archivado/completado  estado     String   @default("disponible") // disponible, vendido, reservado

  clienteId  Int?  activo     Boolean  @default(true) // true: activo, false: archivado/completado

  cliente    Cliente? @relation(fields: [clienteId], references: [id])  clienteId  Int?

  pagos      Pago[]  cliente    Cliente? @relation(fields: [clienteId], references: [id])

  createdAt  DateTime @default(now())  pagos      Pago[]

  updatedAt  DateTime @updatedAt  createdAt  DateTime @default(now())

}  updatedAt  DateTime @updatedAt

}

model Pago {

  id                Int       @id @default(autoincrement())model Pago {

  autoId            Int  id                Int       @id @default(autoincrement())

  auto              Auto      @relation(fields: [autoId], references: [id])  autoId            Int

  numeroCuota       Int  auto              Auto      @relation(fields: [autoId], references: [id])

  monto             Float  numeroCuota       Int

  fechaVencimiento  DateTime  monto             Float

  fechaPago         DateTime?  fechaVencimiento  DateTime

  estado            String    @default("pendiente") // pendiente, pagado, vencido  fechaPago         DateTime?

  createdAt         DateTime  @default(now())  estado            String    @default("pendiente") // pendiente, pagado, vencido

  updatedAt         DateTime  @updatedAt  createdAt         DateTime  @default(now())

}  updatedAt         DateTime  @updatedAt

}
